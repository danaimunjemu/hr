<div class="flex justify-between items-center mb-6">
  <div>
    <h1 class="text-2xl font-bold">Timesheets</h1>
    <p class="text-gray-500">Review and process submitted employee timesheets.</p>
  </div>
</div>

<nz-card>
  <nz-table #basicTable [nzData]="timesheets()" [nzLoading]="loading()" [nzPageSize]="10">
    <thead>
      <tr>
        <th>Timesheet Number</th>
        <th>Employee Id</th>
        <th>Period Start</th>
        <th>Period End</th>
        <th>Total Regular</th>
        <th>Total Overtime</th>
        <th>Total Hours</th>
        <th>Status</th>
        <th>Submitted Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of basicTable.data">
        <td>{{ getTimesheetNumber(data) }}</td>
        <td>{{ data.employee.id }}</td>
        <td>{{ data.periodStartDate | date }}</td>
        <td>{{ data.periodEndDate | date }}</td>
        <td>{{ data.totalRegularHours }}</td>
        <td>{{ data.totalOvertimeHours }}</td>
        <td>{{ data.totalHours }}</td>
        <td>
          <nz-tag [nzColor]="getStatusColor(data.status)">{{ data.status }}</nz-tag>
        </td>
        <td>{{ data.submittedDate ? (data.submittedDate | date:'medium') : '-' }}</td>
        <td>
          <ng-container *ngIf="data.status === 'DRAFT' || data.status === 'REJECTED'">
            <a (click)="submitTimesheet(data.id)">Submit</a>
          </ng-container>
          <ng-container *ngIf="data.status === 'SUBMITTED'">
            <a (click)="approveTimesheet(data.id)">Approve</a>
            <nz-divider nzType="vertical"></nz-divider>
            <a (click)="rejectTimesheet(data.id)">Reject</a>
          </ng-container>
          <span *ngIf="data.status === 'APPROVED'" class="text-gray-400">No Actions</span>
        </td>
      </tr>
    </tbody>
  </nz-table>
</nz-card>
