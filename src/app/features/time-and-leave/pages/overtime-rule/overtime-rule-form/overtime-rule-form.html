<nz-page-header
  [nzGhost]="false"
  [nzBackIcon]="'arrow-left'"
  (nzBack)="onCancel()"
  [nzTitle]="isEditMode ? 'Edit Overtime Rule' : 'New Overtime Rule'"
>
</nz-page-header>

<nz-card [nzLoading]="loading">
  <form nz-form [formGroup]="form" (ngSubmit)="onSubmit()" nzLayout="vertical">
    
    <nz-form-item>
      <nz-form-label [nzSpan]="24" nzRequired nzFor="name">Rule Name</nz-form-label>
      <nz-form-control [nzSpan]="24" nzErrorTip="Please enter a name">
        <input nz-input formControlName="name" placeholder="e.g., Standard Overtime 1.5x" />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="24" nzRequired nzFor="conditionType">Condition Type</nz-form-label>
      <nz-form-control [nzSpan]="24" nzErrorTip="Please select a condition">
        <nz-select formControlName="conditionType" nzPlaceHolder="Select condition">
          <nz-option *ngFor="let type of conditionTypes" [nzValue]="type.value" [nzLabel]="type.label"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label [nzSpan]="24" nzRequired nzFor="rateMultiplier">Rate Multiplier</nz-form-label>
          <nz-form-control [nzSpan]="24" nzErrorTip="Required (min 1.0)">
            <nz-input-number formControlName="rateMultiplier" [nzMin]="1.0" [nzStep]="0.1" style="width: 100%"></nz-input-number>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label [nzSpan]="24" nzRequired nzFor="priority">Priority</nz-form-label>
          <nz-form-control [nzSpan]="24" nzErrorTip="Required">
            <nz-input-number formControlName="priority" [nzMin]="1" [nzStep]="1" style="width: 100%"></nz-input-number>
            <span class="text-xs text-gray-500">Lower number = higher priority</span>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>

    <nz-form-item *ngIf="form.get('conditionType')?.value === 'DAILY_EXCESS' || form.get('conditionType')?.value === 'WEEKLY_EXCESS'">
      <nz-form-label [nzSpan]="24" nzFor="thresholdMinutes">Threshold (Minutes)</nz-form-label>
      <nz-form-control [nzSpan]="24" nzErrorTip="Positive number required">
        <nz-input-number formControlName="thresholdMinutes" [nzMin]="0" [nzStep]="30" style="width: 100%"></nz-input-number>
        <span class="text-xs text-gray-500">Minutes after which this rule applies (e.g. 480 for >8 hours)</span>
      </nz-form-control>
    </nz-form-item>

    <div class="flex justify-end gap-4 mt-6">
      <button nz-button type="button" (click)="onCancel()">Cancel</button>
      <button nz-button nzType="primary" [nzLoading]="submitting">
        {{ isEditMode ? 'Update' : 'Create' }}
      </button>
    </div>
  </form>
</nz-card>
