<nz-page-header nzBackIcon nzTitle="New Employee" (nzBack)="cancel()">
  <nz-breadcrumb nz-page-header-breadcrumb>
    <nz-breadcrumb-item><a routerLink="/app/employees">Employees</a></nz-breadcrumb-item>
    <nz-breadcrumb-item>New</nz-breadcrumb-item>
  </nz-breadcrumb>
</nz-page-header>

<div class="p-6">
  <nz-card>
    <form nz-form [formGroup]="createForm" (ngSubmit)="submitForm()">
      <!-- User Account -->
      <h3 class="mb-4 text-lg font-medium">User Account</h3>
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24" nzRequired>Username</nz-form-label>
            <nz-form-control [nzSpan]="24" nzErrorTip="Please input username!">
              <input nz-input formControlName="username" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24" nzRequired>Email</nz-form-label>
            <nz-form-control [nzSpan]="24" nzErrorTip="Please input a valid email!">
              <input nz-input formControlName="email" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24" nzRequired>Password</nz-form-label>
            <nz-form-control [nzSpan]="24" nzErrorTip="Please input password!">
              <input nz-input type="password" formControlName="password" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24" nzRequired>Phone Number</nz-form-label>
            <nz-form-control [nzSpan]="24" nzErrorTip="Please input phone number!">
              <input nz-input formControlName="phoneNumber" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24" nzRequired>Roles</nz-form-label>
            <nz-form-control [nzSpan]="24" nzErrorTip="Please select at least one role!">
              <nz-select formControlName="roles" nzMode="multiple">
                <nz-option *ngFor="let role of availableRoles" [nzValue]="role" [nzLabel]="role"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <!-- Removed Account Options as they are backend controlled -->
        </div>
      </div>

      <nz-divider></nz-divider>

      <div formGroupName="employee">
        <!-- Employee Basic Details -->
        <h3 class="mb-4 text-lg font-medium">Employee Basic Details</h3>
        <div nz-row [nzGutter]="24">
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>First Name</nz-form-label>
              <nz-form-control [nzSpan]="24" nzErrorTip="Please input first name!">
                <input nz-input formControlName="firstName" />
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Last Name</nz-form-label>
              <nz-form-control [nzSpan]="24" nzErrorTip="Please input last name!">
                <input nz-input formControlName="lastName" />
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>National ID</nz-form-label>
              <nz-form-control [nzSpan]="24" nzErrorTip="Please input national ID!">
                <input nz-input formControlName="nationalId" />
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Employee Number</nz-form-label>
              <nz-form-control [nzSpan]="24" nzErrorTip="Please input employee number!">
                <input nz-input formControlName="employeeNumber" />
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Gender</nz-form-label>
              <nz-form-control [nzSpan]="24" nzErrorTip="Please select gender!">
                <nz-select formControlName="gender">
                  <nz-option *ngFor="let gender of genders" [nzValue]="gender" [nzLabel]="gender"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Date of Birth</nz-form-label>
              <nz-form-control [nzSpan]="24" nzErrorTip="Please select date of birth!">
                <nz-date-picker formControlName="dateOfBirth" class="w-full"></nz-date-picker>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Date Joined</nz-form-label>
              <nz-form-control [nzSpan]="24" nzErrorTip="Please select date joined!">
                <nz-date-picker formControlName="dateJoined" class="w-full"></nz-date-picker>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </div>

      <div class="flex justify-end mt-4">
        <button nz-button type="button" (click)="cancel()" class="mr-2">Cancel</button>
        <button nz-button nzType="primary" [nzLoading]="loading()" type="submit">Register Employee</button>
      </div>
    </form>
  </nz-card>
</div>
