<nz-page-header nzBackIcon nzTitle="Edit Employee" (nzBack)="cancel()">
  <nz-breadcrumb nz-page-header-breadcrumb>
    <nz-breadcrumb-item><a routerLink="/employees">Employees</a></nz-breadcrumb-item>
    <nz-breadcrumb-item>Edit</nz-breadcrumb-item>
  </nz-breadcrumb>
</nz-page-header>

<div class="p-6">
  <!-- 3️⃣ Bind directly to signals using parenthesis syntax -->
  <div *ngIf="loading()" class="flex justify-center items-center h-64">
    <nz-spin nzSize="large"></nz-spin>
  </div>

  <div *ngIf="error()" class="mb-4">
    <nz-alert [nzType]="'error'" [nzMessage]="error()" nzShowIcon></nz-alert>
  </div>

  <nz-card *ngIf="employee() && !loading()">
    <form nz-form [formGroup]="editForm" (ngSubmit)="submitForm()">
      
      <!-- Personal Details -->
      <h3 class="mb-4 text-lg font-medium">Personal Details</h3>
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24" nzRequired>First Name</nz-form-label>
            <nz-form-control [nzSpan]="24" nzErrorTip="Please input first name!">
              <input nz-input formControlName="firstName" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24" nzRequired>Last Name</nz-form-label>
            <nz-form-control [nzSpan]="24" nzErrorTip="Please input last name!">
              <input nz-input formControlName="lastName" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24">Marital Status</nz-form-label>
            <nz-form-control [nzSpan]="24">
              <nz-select formControlName="maritalStatus">
                <nz-option nzValue="SINGLE" nzLabel="Single"></nz-option>
                <nz-option nzValue="MARRIED" nzLabel="Married"></nz-option>
                <nz-option nzValue="DIVORCED" nzLabel="Divorced"></nz-option>
                <nz-option nzValue="WIDOWED" nzLabel="Widowed"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24">Nationality</nz-form-label>
            <nz-form-control [nzSpan]="24">
              <input nz-input formControlName="nationality" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <nz-divider></nz-divider>

      <!-- Contact Information -->
      <h3 class="mb-4 text-lg font-medium">Contact Information</h3>
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24" nzRequired>Email</nz-form-label>
            <nz-form-control [nzSpan]="24" nzErrorTip="Please input valid email!">
              <input nz-input formControlName="email" type="email" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24">Work Phone</nz-form-label>
            <nz-form-control [nzSpan]="24">
              <input nz-input formControlName="workPhone" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24">Mobile Phone</nz-form-label>
            <nz-form-control [nzSpan]="24">
              <input nz-input formControlName="mobilePhone" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <div formGroupName="address">
        <div nz-row [nzGutter]="24">
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24">Physical Address</nz-form-label>
              <nz-form-control [nzSpan]="24">
                <textarea nz-input formControlName="physicalAddress" rows="3"></textarea>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24">Postal Address</nz-form-label>
              <nz-form-control [nzSpan]="24">
                <textarea nz-input formControlName="postalAddress" rows="3"></textarea>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </div>

      <nz-divider></nz-divider>

      <!-- Employment Details -->
      <h3 class="mb-4 text-lg font-medium">Employment Details</h3>
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24">Employment Status</nz-form-label>
            <nz-form-control [nzSpan]="24">
               <nz-select formControlName="employmentStatus">
                <nz-option nzValue="ACTIVE" nzLabel="Active"></nz-option>
                <nz-option nzValue="INACTIVE" nzLabel="Inactive"></nz-option>
                <nz-option nzValue="TERMINATED" nzLabel="Terminated"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSpan]="24">Superior</nz-form-label>
            <nz-form-control [nzSpan]="24">
              <input nz-input formControlName="superior" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <div class="flex justify-end mt-4">
        <button nz-button type="button" (click)="cancel()" class="mr-2">Cancel</button>
        <button nz-button nzType="primary" [nzLoading]="saving()" type="submit">Save Changes</button>
      </div>
    </form>
  </nz-card>
</div>
